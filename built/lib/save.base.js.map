{"version":3,"sources":["../../src/lib/save.base.js"],"names":["SaveBase","client","config","fields","docs","resolve","reject","mget","body","then","catch","result","res","each","field","val","pick","bulk"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEaA,Q,WAAAA,Q;AACT,sBAAYC,MAAZ,EAAoBC,MAApB,EAA4BC,MAA5B,EAAoC;AAAA;;AAChC,aAAKF,MAAL,GAAcA,MAAd;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKC,MAAL,GAAcA,MAAd;AACH;;;;6BAEIC,I,EAAM;AAAA;;AACP,mBAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,sBAAKL,MAAL,CAAYM,IAAZ,CAAiB;AACbC,0BAAM;AACFJ,8BAAMA;AADJ;AADO,iBAAjB,EAIGK,IAJH,CAIQJ,OAJR,EAIiBK,KAJjB,CAIuBJ,MAJvB;AAKH,aANM,CAAP;AAOH;;;6BAEIK,M,EAAQ;AACT,gBAAIC,MAAM,EAAV;;AAEA,6BAAEC,IAAF,CAAO,KAAKV,MAAZ,EAAoB,UAACW,KAAD,EAAW;AAC3B,oBAAIC,MAAM,iBAAEC,IAAF,CAAOL,MAAP,EAAeG,KAAf,CAAV;;AAEAC,uBAAOA,IAAID,KAAJ,CAAP,KAAsBF,IAAIE,KAAJ,IAAaC,IAAID,KAAJ,CAAnC;AACH,aAJD;;AAMA,mBAAOF,GAAP;AACH;;;6BAEIR,I,EAAM;AAAA;;AACP,mBAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,uBAAKL,MAAL,CAAYgB,IAAZ,CAAiB;AACbT,0BAAMJ;AADO,iBAAjB,EAEGK,IAFH,CAEQJ,OAFR,EAEiBK,KAFjB,CAEuBJ,MAFvB;AAGH,aAJM,CAAP;AAKH","file":"save.base.js","sourcesContent":["import _ from \"lodash\";\n\nexport class SaveBase {\n    constructor(client, config, fields) {\n        this.client = client;\n        this.config = config;\n        this.fields = fields;\n    }\n\n    mget(docs) {\n        return new Promise((resolve, reject) => {\n            this.client.mget({\n                body: {\n                    docs: docs\n                }\n            }).then(resolve).catch(reject);\n        });\n    }\n\n    pick(result) {\n        let res = {};\n\n        _.each(this.fields, (field) => {\n            let val = _.pick(result, field);\n\n            val && val[field] && (res[field] = val[field]);\n        });\n\n        return res;\n    }\n\n    save(docs) {\n        return new Promise((resolve, reject) => {\n            this.client.bulk({\n                body: docs\n            }).then(resolve).catch(reject);\n        });\n    }\n}"]}